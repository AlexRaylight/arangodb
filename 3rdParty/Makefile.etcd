# -*- mode: Makefile; -*-

## -----------------------------------------------------------------------------
## --SECTION--                                                             ETCD
## -----------------------------------------------------------------------------

################################################################################
### @brief etcd
################################################################################

BUILT_SOURCES += @ZLIB_LIBS@

@ZLIB_LIBS@: @srcdir@/.zlib-build-@TRI_BITS@

@srcdir@/.etcd-build-@TRI_BITS@:
	@echo
	@echo "--------------------------------------------------------------------------------"
	@echo "BUILDING etcd"
	@echo "--------------------------------------------------------------------------------"
	@echo

	cd @top_srcdir@/3rdParty/etcd && ./build
	cp @top_srcdir@/3rdParty/etcd/bin/etcd @top_srcdir@/bin

	@touch @srcdir@/.etcd-build-@TRI_BITS@

	@echo
	@echo "--------------------------------------------------------------------------------"
	@echo "BUILD etcd FINISHED"
	@echo "--------------------------------------------------------------------------------"
	@echo

################################################################################
### @brief additional files to remove
################################################################################

CLEANUP_3RD += clean-etcd

clean-etcd:
	rm -f @srcdir@/.etcd-build-@TRI_BITS@
	cd @top_srcdir@/3rdParty/etcd && rm -rf bin pkg src
	rm -f @top_srcdir@/bin/etcd

## -----------------------------------------------------------------------------
## --SECTION--                                                       END-OF-FILE
## -----------------------------------------------------------------------------

## Local Variables:
## mode: outline-minor
## outline-regexp: "^\\(### @brief\\|## --SECTION--\\|# -\\*- \\)"
## End:
