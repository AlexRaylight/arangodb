<html><head><title>ArangoDB Manual</title> <style media="screen" type="text/css" style="display:none">body{background-color:white;font:13px Helvetica,arial,freesans,clean,sans-serif;line-height:1.4;color:#333;}#access{font-size:16px;margin-left:12px;display:block;margin-left:10px;margin-right:10px;background-color:#F3F1EE!important;}#access a{border-right:1px solid #DBDEDF;color:#A49F96;display:block;line-height:38px;padding:0 10px;text-decoration:none;}#navigation ul{text-transform:uppercase;list-style:none;margin:0;}#navigation li{float:left;position:relative;}#container{width:920px;margin:0 auto;}a{color:#4183C4;text-decoration:none;}.contents h2{font-size:24px;border-bottom:1px solid #CCC;color:black;}.contents h1{font-size:33px;border-bottom:1px solid #CCC;color:black;}.clearfix:after{content:".";display:block;clear:both;font-size:0;height:0;visibility:hidden;}/**/ *:first-child+html .clearfix{min-height:0;}/**/ * html .clearfix{height:1%;}</style></head><body><div id="container"><img src="images/logo_arangodb.png" width="397" height="67" alt="ArangoDB"><div id="access" role="navigation"><div id="navigation"><ul id="menu-ahome" class="menu"><li><a href="Home.html">Table of contents</a></li> <li><a href="http://www.arangodb.org">ArangoDB homepage</a></li></ul></div><div class="clearfix"></div></div><div>
<!-- Generated by Doxygen 1.7.3 -->
</div>
<div class="header">
  <div class="headertitle">
<h1>Using jsUnity and node-jscoverage </h1>  </div>
</div>
<div class="contents">
<div class="textblock"><p>The ArangoDB contains a wrapper for <a href="http://jsunity.com/">jsUnity</a>, a lightyweight universal JavAScript unit testing framework.</p>
<h2><a class="anchor" id="jsUnityRunningTest"></a>
Running jsUnity Tests</h2>
<p>Assume that you have a test file containing</p>
<div class="fragment"><pre class="fragment">function aqlTestSuite () {
  return {
    testSizeOfTestCollection : function () {
      assertEqual(5, 5);
  };
}

jsUnity.run(aqlTestSuite);

return jsunity.done();
</pre></div><p>Then you can run the test suite using <code>jsunity.runTest</code></p>
<div class="fragment"><pre class="fragment">arango&gt; ju.runTest("test.js");
2012-01-28T19:10:23Z [10671] INFO Running aqlTestSuite
2012-01-28T19:10:23Z [10671] INFO 1 test found
2012-01-28T19:10:23Z [10671] INFO [PASSED] testSizeOfTestCollection
2012-01-28T19:10:23Z [10671] INFO 1 test passed
2012-01-28T19:10:23Z [10671] INFO 0 tests failed
2012-01-28T19:10:23Z [10671] INFO 1 millisecond elapsed
</pre></div><h2><a class="anchor" id="jsUnityRunningCoverage"></a>
Running jsUnity Tests with Coverage</h2>
<p>You can use the coverage tool <a href="https://github.com/visionmedia/node-jscoverage"><code>node-jscoverage</code></a>.</p>
<p>Assume that your file live in a directory called <code>lib</code>. Use</p>
<p><code>node-jscoverage lib lib-cov</code></p>
<p>to create a copy of the JavaScript files with coverage information. Start the ArangoDB with these files and use <code>jsunity.runCoverage</code> instead of <code>jsunity.runTest</code>. </p>
</div></div>
</div></body></html>
